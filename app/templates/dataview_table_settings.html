<form action="{{ url_for( 'update_view_settings', view=views.current.name, section='layout', setting='layout_options') }}" method="POST" onsubmit="announceSave()" id="table-settings-form">
    {# CHECK: Need the onsubmit to announce save completed to live region? Or only need if not refreshing entire page when submitted?  #}
    <div class="container">
        <div class="row justify-content-between">
            <div class="col-4 p-0">
                <div class="dropdown">
                    {# TODO: Change dropdown button to disclosure/accordion #}

                    {# TODO: Check table settings form accessibility #}
                    <button type="button" class="btn btn-outline-light btn-lg dropdown-toggle" data-bs-toggle="dropdown"
                        aria-haspopup="true" aria-expanded="false" data-bs-auto-close="outside">
                        Show/hide columns
                    </button>

                    <fieldset class="dropdown-menu px-5 mt-1 position-relative">
                        <legend class="visually-hidden">Show/Hide Table Columns</legend>
                        {% for field in options.job_fields %}
                        <div class="form-check p-2">
                            {% if field.hidden %}

                            <input class="form-check-input me-1" type="checkbox" value="{{ field.name }}"
                                id="display-option-{{ field.name }}" name="display">
                            {% else %}
                            <input class="form-check-input me-1" type="checkbox" value="{{ field.name }}"
                                id="display-option-{{ field.name }}" name="display" checked>
                            {% endif %}
                            <label class="form-check-label"
                                for="display-option-{{ field.name }}">{{ field.label }}</label>
                        </div>
                        {% endfor %}
                    </fieldset>

                </div>
            </div>
            {# Later TODO: Add grouping #}
            {# Later TODO: Allow reordering fields #}
            <!-- <div class="col-4 p-0 d-flex justify-content-end">
                <button class="settings-btn btn btn-primary btn-lg px-4" type="submit">Save</button>
            </div> -->
        </div>


    </div>

</form>