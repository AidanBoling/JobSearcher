<form action="{{ url_for( 'update_table_settings', setting='job_fields') }}" method="POST" onsubmit="announceSave()">
    {# CHECK: Need the onsubmit to announce save completed to live region? Or only need if not refreshing entire page when submitted?  #}
    <div class="container">
        <div class="row justify-content-between">
            <div class="col-4 p-0">
                <div class="dropdown">
                    {# TODO: Check table settings form accessibility #}
                    <button type="button" class="btn btn-outline-light btn-lg dropdown-toggle" data-bs-toggle="dropdown"
                        aria-haspopup="true" aria-expanded="false" data-bs-auto-close="outside">
                        Show/hide columns
                    </button>

                    <fieldset class="dropdown-menu px-5">
                        <legend class="visually-hidden">Show/Hide Table Columns</legend>
                        {% for field in options.job_fields %}
                        <div class="form-check p-2">
                            {% if field.hidden %}

                            <input class="form-check-input me-1" type="checkbox" value="{{ field.name }}"
                                id="display-option-{{ field.name }}" name="display">
                            {% else %}
                            <input class="form-check-input me-1" type="checkbox" value="{{ field.name }}"
                                id="display-option-{{ field.name }}" name="display" checked>
                            {% endif %}
                            <label class="form-check-label"
                                for="display-option-{{ field.name }}">{{ field.label }}</label>
                        </div>
                        {% endfor %}
                    </fieldset>

                </div>
            </div>
            {# TODO: Add ability to change sort-by field(s) #}
            {# TODO: Allow create/update custom regex to filter out titles #}
            {# Later TODO: Add grouping #}
            {# Later TODO: Allow reordering fields #}
            <div class="col-4 p-0 d-flex justify-content-end">
                <button class="settings-btn btn btn-primary btn-lg px-4" type="submit">Save</button>
            </div>
        </div>


    </div>

</form>